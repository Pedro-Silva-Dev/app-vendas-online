(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{WVuc:function(t,e,a){"use strict";a.r(e),a.d(e,"CategoriaModule",(function(){return j}));var o=a("PCNd"),r=a("3Pt+"),i=a("ofXK"),n=a("tyNb");class c{}var s=a("fXoL"),b=a("z7hj"),l=a("K3ix"),d=a("5eHb"),u=a("QJFE"),m=a("dZIy"),g=a("Lm2G"),h=a("9K/a"),p=a("4Kj8");function v(t,e){if(1&t&&(s.Pb(0,"span"),s.rc(1),s.Ob()),2&t){const t=s.Yb();s.xb(1),s.sc(null!=t.categoria&&t.categoria.id?"Atualizar":"Cadastrar")}}function f(t,e){1&t&&s.Kb(0,"app-spinner")}const O=function(t){return{"form-control":!0,"is-invalid":t}};let P=(()=>{class t{constructor(t,e,a){this._formBuilder=t,this._categoriaService=e,this._toastrService=a,this.eventFechar=new s.n,this.eventReload=new s.n}ngOnInit(){this.criarCategoriaForm()}criarCategoriaForm(){this.categoriaForm=this._formBuilder.group({id:[this.categoria.id],nome:[this.categoria.nome,[r.n.required,h.a]]})}fechar(){this.eventFechar.emit(!0)}salvar(){this.categoriaForm.valid&&(this.processando=!0,this.categoria.id?this.atualizar():this.cadastrar())}atualizar(){this._categoriaService.atualizar(this.categoriaForm.value).subscribe(t=>{200==t.status?t.body.id?(this._toastrService.success("Categoria atualizada com sucesso!"),this.eventReload.emit(t.body),this.eventFechar.emit(!0)):(this._toastrService.warning("Ocorreu um erro ao tentar obter os resultados da atualiza\xe7\xe3o, por favor tente novamente."),this.processando=!1):(this._toastrService.warning("Ocorreu um erro na tentativa de atualiza\xe7\xe3o, por favor tente novamente."),this.processando=!1)},t=>{this._toastrService.error("Ocorreu um erro no processo de atualiza\xe7\xe3o, por favor contate o suporte."),this.processando=!1})}cadastrar(){this._categoriaService.cadastrar(this.categoriaForm.value).subscribe(t=>{201==t.status?t.body.id?(this._toastrService.success("Categoria cadastrada com sucesso!"),this.eventReload.emit(t.body),this.eventFechar.emit(!0)):(this._toastrService.warning("Ocorreu um erro ao tentar obter os resultados do cadastro, por favor tente novamente."),this.processando=!1):(this._toastrService.warning("Ocorreu um erro na tentativa de cadastro, por favor tente novamente."),this.processando=!1)},t=>{this._toastrService.error("Ocorreu um erro no processo de cadastro, por favor contate o suporte."),this.processando=!1})}validarCampo(t){return this.categoriaForm.get(t).invalid&&this.categoriaForm.touched}}return t.\u0275fac=function(e){return new(e||t)(s.Jb(r.b),s.Jb(b.a),s.Jb(d.b))},t.\u0275cmp=s.Db({type:t,selectors:[["app-categoria-form"]],inputs:{categoria:"categoria"},outputs:{eventFechar:"eventFechar",eventReload:"eventReload"},decls:21,vars:8,consts:[[1,"modal-header"],[1,"modal-title","pull-left"],["type","button","aria-label","Close",1,"close","pull-right",3,"click"],["aria-hidden","true"],[3,"formGroup","submit"],[1,"modal-body"],[1,"form-group"],["for","nome"],[1,"text-danger"],["formControlName","nome","type","text","id","nome","placeholder","Nome da categoria",3,"ngClass"],[1,"modal-footer"],["id","voltar","type","button",1,"btn","btn-outline-secondary",3,"click"],["id","cadastrar","type","submit",1,"btn","btn-primary",3,"disabled"],[4,"ngIf","ngIfElse"],["spinner",""]],template:function(t,e){if(1&t&&(s.Pb(0,"div",0),s.Pb(1,"h4",1),s.rc(2),s.Ob(),s.Pb(3,"button",2),s.Wb("click",(function(){return e.fechar()})),s.Pb(4,"span",3),s.rc(5,"\xd7"),s.Ob(),s.Ob(),s.Ob(),s.Pb(6,"form",4),s.Wb("submit",(function(){return e.salvar()})),s.Pb(7,"div",5),s.Pb(8,"div",6),s.Pb(9,"label",7),s.rc(10,"Nome"),s.Pb(11,"span",8),s.rc(12,"*"),s.Ob(),s.Ob(),s.Kb(13,"input",9),s.Ob(),s.Ob(),s.Pb(14,"div",10),s.Pb(15,"button",11),s.Wb("click",(function(){return e.fechar()})),s.rc(16,"Voltar"),s.Ob(),s.Pb(17,"button",12),s.pc(18,v,2,1,"span",13),s.Ob(),s.Ob(),s.Ob(),s.pc(19,f,1,0,"ng-template",null,14,s.qc)),2&t){const t=s.hc(20);s.xb(2),s.tc("",null!=e.categoria&&e.categoria.id?"Atualizar":"Cadastrar"," Categoria"),s.xb(4),s.bc("formGroup",e.categoriaForm),s.xb(7),s.bc("ngClass",s.dc(6,O,e.validarCampo("nome"))),s.xb(4),s.bc("disabled",e.categoriaForm.invalid),s.xb(1),s.bc("ngIf",!e.processando)("ngIfElse",t)}},directives:[r.p,r.i,r.d,r.a,r.h,r.c,i.h,i.j,p.a],styles:[""]}),t})();function C(t,e){if(1&t){const t=s.Qb();s.Pb(0,"ul",19),s.Pb(1,"li",20),s.Wb("click",(function(){s.jc(t);const e=s.Yb().$implicit,a=s.Yb(),o=s.hc(13);return a.exibirCategoriaForm(o,e)})),s.Pb(2,"a",21),s.rc(3,"Editar"),s.Ob(),s.Ob(),s.Pb(4,"li",22),s.Wb("confirm",(function(){s.jc(t);const e=s.Yb().$implicit;return s.Yb().excluir(e.id)})),s.Pb(5,"a",21),s.rc(6,"Excluir"),s.Ob(),s.Ob(),s.Ob()}if(2&t){s.Yb(2);const t=s.hc(15);s.xb(4),s.bc("swal",t)}}function x(t,e){if(1&t&&(s.Pb(0,"div",10),s.Pb(1,"div",11),s.Pb(2,"div",12),s.Pb(3,"div",13),s.Pb(4,"h4",14),s.rc(5),s.Ob(),s.Ob(),s.Pb(6,"div",15),s.Pb(7,"div",16),s.Pb(8,"span",17),s.rc(9,"more_vert"),s.Ob(),s.pc(10,C,7,1,"ul",18),s.Ob(),s.Ob(),s.Ob(),s.Ob(),s.Ob()),2&t){const t=e.$implicit;s.xb(5),s.sc(t.nome)}}function w(t,e){1&t&&(s.Pb(0,"div",1),s.Pb(1,"div",23),s.Pb(2,"div",24),s.rc(3," Nenhuma informa\xe7\xe3o encontrada. "),s.Ob(),s.Ob(),s.Ob())}function y(t,e){if(1&t){const t=s.Qb();s.Pb(0,"div",1),s.Pb(1,"div",25),s.Pb(2,"pagination",26),s.Wb("pageChanged",(function(e){return s.jc(t),s.Yb().obterPaginaCategoria(e.page)}))("ngModelChange",(function(e){return s.jc(t),s.Yb().pagina=e})),s.Ob(),s.Ob(),s.Ob()}if(2&t){const t=s.Yb();s.xb(2),s.bc("totalItems",t.totalItems)("itemsPerPage",t.tamanho)("ngModel",t.pagina)}}function F(t,e){if(1&t){const t=s.Qb();s.Pb(0,"app-categoria-form",27),s.Wb("eventFechar",(function(){return s.jc(t),s.Yb().fechar()}))("eventReload",(function(){s.jc(t);const e=s.Yb();return e.obterPaginaCategoria(e.pagina)})),s.Ob()}if(2&t){const t=s.Yb();s.bc("categoria",t.categoria)}}const _=[{path:"",component:(()=>{class t{constructor(t,e,a){this._categoriaService=t,this._modalService=e,this._toastrService=a,this.pagina=1,this.tamanho=20,this.totalItems=0}ngOnInit(){this.obterPaginaCategoria(this.pagina)}obterPaginaCategoria(t){this._categoriaService.obterPaginaCategoria(t,this.tamanho).subscribe(t=>{200==t.status&&(this.categorias=t.body,this.totalItems=Number.parseInt(t.headers.get("X-Total-Count")))})}exibirCategoriaForm(t,e){this.categoria=new c,e&&(this.categoria=e),this.modalRef=this._modalService.show(t,{ignoreBackdropClick:!0,class:"modal-md"})}fechar(){this.modalRef.hide()}excluir(t){this._categoriaService.excluir(t).subscribe(e=>{200==e.status?(this._toastrService.success("Categoria excluida com sucesso!"),this.categorias=this.categorias.filter(e=>e.id!=t)):this._toastrService.warning("Ocorreu um erro ao tentar excluir a categoria, por favor tente novamente.")},t=>{this._toastrService.error("Ocorreu um erro ao tentar excluir a categoria, por favor entre em contato com o suporte.")})}}return t.\u0275fac=function(e){return new(e||t)(s.Jb(b.a),s.Jb(l.a),s.Jb(d.b))},t.\u0275cmp=s.Db({type:t,selectors:[["app-categoria"]],decls:16,vars:5,consts:[[1,"container-fluid"],[1,"row"],[1,"col-lg-12","mt-4","d-flex","justify-content-between"],[1,"title"],["type","button",1,"btn","btn-outline-primary",3,"click"],["class","col-lg-2 col-md-4",4,"ngFor","ngForOf"],["class","row",4,"ngIf"],["categoriaForm",""],["title","Realmente deseja excluir essa categoria?","text","Todos os produtos associados ser\xe3o exclu\xeddos. Essa a\xe7\xe3o \xe9 irrevers\xedvel","icon","question","cancelButtonText","Cancelar","cancelButtonColor","#2196F3","confirmButtonText","Excluir","confirmButtonColor","#dc3545",3,"showCancelButton","focusCancel"],["deleteSwal",""],[1,"col-lg-2","col-md-4"],[1,"ui-card","p-3"],[1,"d-flex","justify-content-between"],[1,"mt-1"],[1,"title","pl-1"],[1,"d-flex","align-items-center","pl-1","cursor-pointer"],["dropdown","",1,"btn-group"],["dropdownToggle","",1,"material-icons"],["id","dropdown-animated","class","dropdown-menu","role","menu","aria-labelledby","button-animated",4,"dropdownMenu"],["id","dropdown-animated","role","menu","aria-labelledby","button-animated",1,"dropdown-menu"],["role","menuitem",3,"click"],["href","javascript:void(0)",1,"dropdown-item"],["role","menuitem",3,"swal","confirm"],[1,"col-lg-12"],["role","alert",1,"alert","alert-info"],[1,"col-xs-12","col-12","mt-3"],["nextText","Avan\xe7ar","previousText","Voltar",3,"totalItems","itemsPerPage","ngModel","pageChanged","ngModelChange"],[3,"categoria","eventFechar","eventReload"]],template:function(t,e){if(1&t){const t=s.Qb();s.Pb(0,"div",0),s.Pb(1,"div",1),s.Pb(2,"div",2),s.Pb(3,"h3",3),s.rc(4,"Categorias"),s.Ob(),s.Pb(5,"button",4),s.Wb("click",(function(){s.jc(t);const a=s.hc(13);return e.exibirCategoriaForm(a)})),s.rc(6,"+ Nova Categoria"),s.Ob(),s.Ob(),s.Ob(),s.Kb(7,"hr"),s.Pb(8,"div",1),s.pc(9,x,11,1,"div",5),s.Ob(),s.pc(10,w,4,0,"div",6),s.pc(11,y,3,3,"div",6),s.Ob(),s.pc(12,F,1,1,"ng-template",null,7,s.qc),s.Kb(14,"swal",8,9)}2&t&&(s.xb(9),s.bc("ngForOf",e.categorias),s.xb(1),s.bc("ngIf",!(null!=e.categorias&&e.categorias.length)),s.xb(1),s.bc("ngIf",e.totalItems>e.tamanho),s.xb(3),s.bc("showCancelButton",!0)("focusCancel",!0))},directives:[i.i,i.j,u.a,m.a,m.d,m.b,u.b,g.a,r.h,r.j,P],styles:[""]}),t})()}];let S=(()=>{class t{}return t.\u0275mod=s.Hb({type:t}),t.\u0275inj=s.Gb({factory:function(e){return new(e||t)},imports:[[n.c.forChild(_)],n.c]}),t})(),j=(()=>{class t{}return t.\u0275mod=s.Hb({type:t}),t.\u0275inj=s.Gb({factory:function(e){return new(e||t)},imports:[[i.b,S,r.l,r.e,o.a]]}),t})()}}]);