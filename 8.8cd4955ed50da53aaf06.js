(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{xw52:function(t,e,i){"use strict";i.r(e),i.d(e,"ProdutoModule",(function(){return Y}));var r=i("3Pt+"),o=i("PCNd"),n=i("ofXK"),a=i("tyNb");class s{}var l=i("fXoL"),u=i("IzEk"),c=i("AytR"),h=i("tk/3");let d=(()=>{class t{constructor(t){this._http=t}obterPaginaProduto(t,e,i,r,o,n){return this._http.get(`${c.a.BASE_URL}/produtos?_expand=categoria&_page=${t}&_limit=${e}${i?"&nome_like="+i:""}${r?"&valor_gte="+r:""}${o?"&valor_lte="+o:""}${n?"&categoriaId="+n:""}`,{observe:"response"}).pipe(Object(u.a)(1))}obterListaProduto(){return this._http.get(c.a.BASE_URL+"/produtos",{observe:"response"}).pipe(Object(u.a)(1))}cadastrar(t){return this._http.post(c.a.BASE_URL+"/produtos",t,{observe:"response"}).pipe(Object(u.a)(1))}atualizar(t){return this._http.put(`${c.a.BASE_URL}/produtos/${t.id}`,t,{observe:"response"}).pipe(Object(u.a)(1))}excluir(t){return this._http.delete(`${c.a.BASE_URL}/produtos/${t}`,{observe:"response"}).pipe(Object(u.a)(1))}}return t.\u0275fac=function(e){return new(e||t)(l.Tb(h.b))},t.\u0275prov=l.Fb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var p=i("z7hj"),b=i("5eHb"),m=i("K3ix");let g=new l.q("currency.mask.config");class v{constructor(t){this.htmlInputElement=t}setCursorAt(t){if(this.htmlInputElement.setSelectionRange)this.htmlInputElement.focus(),this.htmlInputElement.setSelectionRange(t,t);else if(this.htmlInputElement.createTextRange){let e=this.htmlInputElement.createTextRange();e.collapse(!0),e.moveEnd("character",t),e.moveStart("character",t),e.select()}}updateValueAndCursor(t,e,i){this.rawValue=t,this.setCursorAt(i-=e-t.length)}get canInputMoreNumbers(){let t=!(this.rawValue.length>=this.htmlInputElement.maxLength&&this.htmlInputElement.maxLength>=0),e=this.inputSelection.selectionStart,i=this.inputSelection.selectionEnd,r=!(e==i||!this.htmlInputElement.value.substring(e,i).match(/\d/)),o="0"==this.htmlInputElement.value.substring(0,1);return t||r||o}get inputSelection(){let t=0,e=0;if("number"==typeof this.htmlInputElement.selectionStart&&"number"==typeof this.htmlInputElement.selectionEnd)t=this.htmlInputElement.selectionStart,e=this.htmlInputElement.selectionEnd;else{let i=document.getSelection().anchorNode;if(i&&i.firstChild==this.htmlInputElement){let i=this.htmlInputElement.value.length,r=this.htmlInputElement.value.replace(/\r\n/g,"\n"),o=this.htmlInputElement.createTextRange(),n=this.htmlInputElement.createTextRange();n.collapse(!1),o.compareEndPoints("StartToEnd",n)>-1?t=e=i:(t=-o.moveStart("character",-i),t+=r.slice(0,t).split("\n").length-1,o.compareEndPoints("EndToEnd",n)>-1?e=i:(e=-o.moveEnd("character",-i),e+=r.slice(0,e).split("\n").length-1))}}return{selectionStart:t,selectionEnd:e}}get rawValue(){return this.htmlInputElement&&this.htmlInputElement.value}set rawValue(t){this._storedRawValue=t,this.htmlInputElement&&(this.htmlInputElement.value=t)}get storedRawValue(){return this._storedRawValue}}class f{constructor(t,e){this.htmlInputElement=t,this.options=e,this.inputManager=new v(t)}addNumber(t){this.rawValue||(this.rawValue=this.applyMask(!1,"0"));let e=String.fromCharCode(t),i=this.inputSelection.selectionStart,r=this.inputSelection.selectionEnd;this.rawValue=this.rawValue.substring(0,i)+e+this.rawValue.substring(r,this.rawValue.length),this.updateFieldValue(i+1)}applyMask(t,e){let{allowNegative:i,decimal:r,precision:o,prefix:n,suffix:a,thousands:s}=this.options,l=(e=t?new Number(e).toFixed(o):e).replace(/[^0-9]/g,"");if(!l)return"";let u=l.slice(0,l.length-o).replace(/^0*/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,s);""==u&&(u="0");let c=u,h=l.slice(l.length-o);o>0&&(h="0".repeat(o-h.length)+h,c+=r+h);let d=0==parseInt(u)&&(0==parseInt(h)||""==h);return(e.indexOf("-")>-1&&i&&!d?"-":"")+n+c+a}clearMask(t){if(null==t||""==t)return null;let e=t.replace(this.options.prefix,"").replace(this.options.suffix,"");return this.options.thousands&&(e=e.replace(new RegExp("\\"+this.options.thousands,"g"),"")),this.options.decimal&&(e=e.replace(this.options.decimal,".")),parseFloat(e)}changeToNegative(){if(this.options.allowNegative&&""!=this.rawValue&&"-"!=this.rawValue.charAt(0)&&0!=this.value){let t=this.inputSelection.selectionStart;this.rawValue="-"+this.rawValue,this.updateFieldValue(t+1)}}changeToPositive(){let t=this.inputSelection.selectionStart;this.rawValue=this.rawValue.replace("-",""),this.updateFieldValue(t-1)}fixCursorPosition(t){let e=this.inputSelection.selectionStart;e>this.getRawValueWithoutSuffixEndPosition()||t?this.inputManager.setCursorAt(this.getRawValueWithoutSuffixEndPosition()):e<this.getRawValueWithoutPrefixStartPosition()&&this.inputManager.setCursorAt(this.getRawValueWithoutPrefixStartPosition())}getRawValueWithoutSuffixEndPosition(){return this.rawValue.length-this.options.suffix.length}getRawValueWithoutPrefixStartPosition(){return null!=this.value&&this.value<0?this.options.prefix.length+1:this.options.prefix.length}removeNumber(t){let{decimal:e,thousands:i}=this.options,r=this.inputSelection.selectionEnd,o=this.inputSelection.selectionStart;o>this.rawValue.length-this.options.suffix.length&&(r=this.rawValue.length-this.options.suffix.length,o=this.rawValue.length-this.options.suffix.length),r==o&&(46!=t&&63272!=t||!/^\d+$/.test(this.rawValue.substring(o,r+1))||(r+=1),46!=t&&63272!=t||this.rawValue.substring(o,r+1)!=e&&this.rawValue.substring(o,r+1)!=i||(r+=2,o+=1),8==t&&/^\d+$/.test(this.rawValue.substring(o-1,r))&&(o-=1),8!=t||this.rawValue.substring(o-1,r)!=e&&this.rawValue.substring(o-1,r)!=i||(o-=2,r-=1)),this.rawValue=this.rawValue.substring(0,o)+this.rawValue.substring(r,this.rawValue.length),this.updateFieldValue(o)}updateFieldValue(t){let e=this.applyMask(!1,this.rawValue||"");this.inputManager.updateValueAndCursor(e,this.rawValue.length,t=null==t?this.rawValue.length:t)}updateOptions(t){let e=this.value;this.options=t,this.value=e}get canInputMoreNumbers(){return this.inputManager.canInputMoreNumbers}get inputSelection(){return this.inputManager.inputSelection}get rawValue(){return this.inputManager.rawValue}set rawValue(t){this.inputManager.rawValue=t}get storedRawValue(){return this.inputManager.storedRawValue}get value(){return this.clearMask(this.rawValue)}set value(t){this.rawValue=this.applyMask(!0,""+t)}}class S{constructor(t,e){this.inputService=new f(t,e),this.htmlInputElement=t}handleClick(t,e){0!=Math.abs(this.inputService.inputSelection.selectionEnd-this.inputService.inputSelection.selectionStart)||isNaN(this.inputService.value)||this.inputService.fixCursorPosition(e)}handleCut(t){this.isReadOnly()||setTimeout(()=>{this.inputService.updateFieldValue(),this.setValue(this.inputService.value),this.onModelChange(this.inputService.value)},0)}handleInput(t){if(this.isReadOnly())return;let e=this.getNewKeyCode(this.inputService.storedRawValue,this.inputService.rawValue),i=this.inputService.rawValue.length,r=this.inputService.inputSelection.selectionEnd,o=this.inputService.getRawValueWithoutSuffixEndPosition(),n=this.inputService.storedRawValue.length;if(this.inputService.rawValue=this.inputService.storedRawValue,r==o&&1==Math.abs(i-n)||0==n){if(i<n&&(0!=this.inputService.value?this.inputService.removeNumber(8):this.setValue(null)),i>n)switch(e){case 43:this.inputService.changeToPositive();break;case 45:this.inputService.changeToNegative();break;default:if(!this.inputService.canInputMoreNumbers||isNaN(this.inputService.value)&&null==String.fromCharCode(e).match(/\d/))return;this.inputService.addNumber(e)}this.setCursorPosition(t),this.onModelChange(this.inputService.value)}else this.setCursorPosition(t)}handleKeydown(t){if(this.isReadOnly())return;let e=t.which||t.charCode||t.keyCode;if(8==e||46==e||63272==e){t.preventDefault();let i=Math.abs(this.inputService.inputSelection.selectionEnd-this.inputService.inputSelection.selectionStart);i!=this.inputService.rawValue.length&&0!=this.inputService.value||(this.setValue(null),this.onModelChange(this.inputService.value)),0!=i||isNaN(this.inputService.value)||(this.inputService.removeNumber(e),this.onModelChange(this.inputService.value)),8!==e&&46!==e||0==i||isNaN(this.inputService.value)||(this.inputService.removeNumber(e),this.onModelChange(this.inputService.value))}}handleKeypress(t){if(this.isReadOnly())return;let e=t.which||t.charCode||t.keyCode;if(null!=e&&-1==[9,13].indexOf(e)&&!this.isArrowEndHomeKeyInFirefox(t)){switch(e){case 43:this.inputService.changeToPositive();break;case 45:this.inputService.changeToNegative();break;default:!this.inputService.canInputMoreNumbers||isNaN(this.inputService.value)&&null==String.fromCharCode(e).match(/\d/)||this.inputService.addNumber(e)}t.preventDefault(),this.onModelChange(this.inputService.value)}}handleKeyup(t){this.inputService.fixCursorPosition()}handlePaste(t){this.isReadOnly()||setTimeout(()=>{this.inputService.updateFieldValue(),this.setValue(this.inputService.value),this.onModelChange(this.inputService.value)},1)}updateOptions(t){this.inputService.updateOptions(t)}getOnModelChange(){return this.onModelChange}setOnModelChange(t){this.onModelChange=t}getOnModelTouched(){return this.onModelTouched}setOnModelTouched(t){this.onModelTouched=t}setValue(t){this.inputService.value=t}getNewKeyCode(t,e){if(t.length>e.length)return null;for(let i=0;i<e.length;i++)if(t.length==i||t[i]!=e[i])return e.charCodeAt(i)}isArrowEndHomeKeyInFirefox(t){return-1!=[35,36,37,38,39,40].indexOf(t.keyCode)&&(null==t.charCode||0==t.charCode)}isReadOnly(){return this.htmlInputElement&&this.htmlInputElement.readOnly}setCursorPosition(t){let e=this.inputService.getRawValueWithoutSuffixEndPosition();setTimeout((function(){t.target.setSelectionRange(e,e)}),0)}}var w;const P={provide:r.g,useExisting:Object(l.S)(()=>x),multi:!0};let x=(()=>{let t=w=class{constructor(t,e,i){this.currencyMaskConfig=t,this.elementRef=e,this.keyValueDiffers=i,this.options={},this.optionsTemplate={align:"right",allowNegative:!0,decimal:".",precision:2,prefix:"$ ",suffix:"",thousands:","},t&&(this.optionsTemplate=t),this.keyValueDiffer=i.find({}).create()}ngAfterViewInit(){this.elementRef.nativeElement.style.textAlign=this.options.align?this.options.align:this.optionsTemplate.align}ngDoCheck(){this.keyValueDiffer.diff(this.options)&&(this.elementRef.nativeElement.style.textAlign=this.options.align?this.options.align:this.optionsTemplate.align,this.inputHandler.updateOptions(Object.assign({},this.optionsTemplate,this.options)))}ngOnInit(){this.inputHandler=new S(this.elementRef.nativeElement,Object.assign({},this.optionsTemplate,this.options))}handleBlur(t){this.inputHandler.getOnModelTouched().apply(t)}handleClick(t){this.inputHandler.handleClick(t,this.isChromeAndroid())}handleCut(t){this.isChromeAndroid()||this.inputHandler.handleCut(t)}handleInput(t){this.isChromeAndroid()&&this.inputHandler.handleInput(t)}handleKeydown(t){this.isChromeAndroid()||this.inputHandler.handleKeydown(t)}handleKeypress(t){this.isChromeAndroid()||this.inputHandler.handleKeypress(t)}handleKeyup(t){this.isChromeAndroid()||this.inputHandler.handleKeyup(t)}handlePaste(t){this.isChromeAndroid()||this.inputHandler.handlePaste(t)}isChromeAndroid(){return/chrome/i.test(navigator.userAgent)&&/android/i.test(navigator.userAgent)}registerOnChange(t){this.inputHandler.setOnModelChange(t)}registerOnTouched(t){this.inputHandler.setOnModelTouched(t)}setDisabledState(t){this.elementRef.nativeElement.disabled=t}validate(t){let e={};return t.value>this.max&&(e.max=!0),t.value<this.min&&(e.min=!0),e!={}?e:null}writeValue(t){this.inputHandler.setValue(t)}};return t.\u0275fac=function(e){return new(e||t)(l.Jb(g,8),l.Jb(l.l),l.Jb(l.t))},t.\u0275dir=l.Eb({type:t,selectors:[["","currencyMask",""]],hostBindings:function(t,e){1&t&&l.Wb("blur",(function(t){return e.handleBlur(t)}))("click",(function(t){return e.handleClick(t)}))("cut",(function(t){return e.handleCut(t)}))("input",(function(t){return e.handleInput(t)}))("keydown",(function(t){return e.handleKeydown(t)}))("keypress",(function(t){return e.handleKeypress(t)}))("keyup",(function(t){return e.handleKeyup(t)}))("paste",(function(t){return e.handlePaste(t)}))},inputs:{options:"options",max:"max",min:"min"},features:[l.wb([P,{provide:r.f,useExisting:w,multi:!0}])]}),t})(),O=(()=>{let t=class{};return t.\u0275mod=l.Hb({type:t}),t.\u0275inj=l.Gb({factory:function(e){return new(e||t)},imports:[[n.b,r.e]]}),t})();var C=i("QJFE"),y=i("dZIy"),V=i("Lm2G"),E=i("9K/a"),I=i("4Kj8");function F(t,e){if(1&t&&(l.Pb(0,"option",21),l.rc(1),l.Ob()),2&t){const t=e.$implicit;l.bc("value",t.id),l.xb(1),l.sc(t.nome)}}function M(t,e){if(1&t&&(l.Pb(0,"span"),l.rc(1),l.Ob()),2&t){const t=l.Yb();l.xb(1),l.sc(null!=t.produto&&t.produto.id?"Atualizar":"Cadastrar")}}function R(t,e){1&t&&l.Kb(0,"app-spinner")}const k=function(t){return{"form-control":!0,"is-invalid":t}},_=function(){return{prefix:"R$ ",thousands:".",decimal:",",align:"left"}};let N=(()=>{class t{constructor(t,e,i){this._produtoService=t,this._formBuilder=e,this._toastrService=i,this.categorias=[],this.eventFechar=new l.n,this.eventReload=new l.n}ngOnInit(){this.criarProdutoForm()}criarProdutoForm(){this.produtoForm=this._formBuilder.group({id:[this.produto.id],nome:[this.produto.nome,[r.n.required,E.a]],valor:[this.produto.valor,[r.n.required]],categoriaId:[this.produto.categoriaId,[r.n.required,E.a]]})}salvar(){console.log(this.produtoForm.value.categoriaId),this.produtoForm.valid&&(this.processando=!0,this.produto.id?this.atualizar():this.cadastrar())}fechar(){this.eventFechar.emit(!0)}atualizar(){this._produtoService.atualizar(this.produtoForm.value).subscribe(t=>{200==t.status?t.body.id?(this._toastrService.success("Produto atualizado com sucesso!"),this.eventReload.emit(t.body),this.eventFechar.emit(!0)):(this._toastrService.warning("Ocorreu um erro ao tentar obter os resultados da atualiza\xe7\xe3o, por favor tente novamente."),this.processando=!1):(this._toastrService.warning("Ocorreu um erro na resposta da atualiza\xe7\xe3o, por favor tente novamente."),this.processando=!1)},t=>{this._toastrService.error("Ocorreu um erro no processo de atualiza\xe7\xe3o, por favor contate o suporte."),this.processando=!1})}cadastrar(){this._produtoService.cadastrar(this.produtoForm.value).subscribe(t=>{201==t.status?t.body.id?(this._toastrService.success("Produto cadastrado com sucesso!"),this.eventReload.emit(t.body),this.eventFechar.emit(!0)):(this._toastrService.warning("Ocorreu um erro ao tentar obter os resultados do cadastro, por favor tente novamente."),this.processando=!1):(this._toastrService.warning("Ocorreu um erro na resposta do cadastro, por favor tente novamente."),this.processando=!1)},t=>{this._toastrService.error("Ocorreu um erro no processo de cadastro, por favor contate o suporte."),this.processando=!1})}validarCampo(t){return this.produtoForm.get(t).invalid&&this.produtoForm.get(t).touched}}return t.\u0275fac=function(e){return new(e||t)(l.Jb(d),l.Jb(r.b),l.Jb(b.b))},t.\u0275cmp=l.Db({type:t,selectors:[["app-produto-form"]],inputs:{produto:"produto",categorias:"categorias"},outputs:{eventFechar:"eventFechar",eventReload:"eventReload"},decls:36,vars:17,consts:[[1,"modal-header"],[1,"modal-title","pull-left"],["type","button","aria-label","Close",1,"close","pull-right",3,"click"],["aria-hidden","true"],[3,"formGroup","submit"],[1,"modal-body"],[1,"form-group"],["for","nome"],[1,"text-danger"],["formControlName","nome","type","text","id","nome","placeholder","Nome do produto",3,"ngClass"],["for","valor"],["currencyMask","","formControlName","valor","placeholder","R$99.99","type","text","id","valor",3,"options","ngClass"],["for","categoria"],["formControlName","categoriaId","id","categoria",3,"ngClass"],["value","null"],[3,"value",4,"ngFor","ngForOf"],[1,"modal-footer"],["id","voltar","type","button",1,"btn","btn-outline-secondary",3,"click"],["id","cadastrar","type","submit",1,"btn","btn-primary",3,"disabled"],[4,"ngIf","ngIfElse"],["spinner",""],[3,"value"]],template:function(t,e){if(1&t&&(l.Pb(0,"div",0),l.Pb(1,"h4",1),l.rc(2),l.Ob(),l.Pb(3,"button",2),l.Wb("click",(function(){return e.fechar()})),l.Pb(4,"span",3),l.rc(5,"\xd7"),l.Ob(),l.Ob(),l.Ob(),l.Pb(6,"form",4),l.Wb("submit",(function(){return e.salvar()})),l.Pb(7,"div",5),l.Pb(8,"div",6),l.Pb(9,"label",7),l.rc(10,"Nome"),l.Pb(11,"span",8),l.rc(12,"*"),l.Ob(),l.Ob(),l.Kb(13,"input",9),l.Ob(),l.Pb(14,"div",6),l.Pb(15,"label",10),l.rc(16,"Valor"),l.Pb(17,"span",8),l.rc(18,"*"),l.Ob(),l.Ob(),l.Kb(19,"input",11),l.Ob(),l.Pb(20,"div",6),l.Pb(21,"label",12),l.rc(22,"Categoria"),l.Pb(23,"span",8),l.rc(24,"*"),l.Ob(),l.Ob(),l.Pb(25,"select",13),l.Pb(26,"option",14),l.rc(27,"Selecione uma categoria"),l.Ob(),l.pc(28,F,2,2,"option",15),l.Ob(),l.Ob(),l.Ob(),l.Pb(29,"div",16),l.Pb(30,"button",17),l.Wb("click",(function(){return e.fechar()})),l.rc(31,"Voltar"),l.Ob(),l.Pb(32,"button",18),l.pc(33,M,2,1,"span",19),l.Ob(),l.Ob(),l.Ob(),l.pc(34,R,1,0,"ng-template",null,20,l.qc)),2&t){const t=l.hc(35);l.xb(2),l.tc("",null!=e.produto&&e.produto.id?"Atualizar":"Cadastrar"," Produto"),l.xb(4),l.bc("formGroup",e.produtoForm),l.xb(7),l.bc("ngClass",l.dc(10,k,e.validarCampo("nome"))),l.xb(6),l.bc("options",l.cc(12,_))("ngClass",l.dc(13,k,e.validarCampo("valor"))),l.xb(6),l.bc("ngClass",l.dc(15,k,e.validarCampo("categoriaId"))),l.xb(3),l.bc("ngForOf",e.categorias),l.xb(4),l.bc("disabled",e.produtoForm.invalid),l.xb(1),l.bc("ngIf",!e.processando)("ngIfElse",t)}},directives:[r.p,r.i,r.d,r.a,r.h,r.c,n.h,x,r.m,r.k,r.o,n.i,n.j,I.a],styles:[""]}),t})();function T(t,e){if(1&t&&(l.Pb(0,"option",19),l.rc(1),l.Ob()),2&t){const t=e.$implicit;l.bc("value",t.id),l.xb(1),l.sc(t.nome)}}function A(t,e){if(1&t){const t=l.Qb();l.Pb(0,"button",20),l.Wb("click",(function(){return l.jc(t),l.Yb().limparFiltros()})),l.rc(1,"Limpar"),l.Ob()}}function K(t,e){if(1&t){const t=l.Qb();l.Pb(0,"ul",31),l.Pb(1,"li",32),l.Wb("click",(function(){l.jc(t);const e=l.Yb().$implicit,i=l.Yb(),r=l.hc(24);return i.exibirProdutoForm(r,e)})),l.Pb(2,"a",33),l.rc(3,"Editar"),l.Ob(),l.Ob(),l.Pb(4,"li",34),l.Wb("confirm",(function(){l.jc(t);const e=l.Yb().$implicit;return l.Yb().excluir(e.id)})),l.Pb(5,"a",33),l.rc(6,"Excluir"),l.Ob(),l.Ob(),l.Ob()}if(2&t){l.Yb(2);const t=l.hc(26);l.xb(4),l.bc("swal",t)}}function j(t,e){if(1&t&&(l.Pb(0,"div",21),l.Pb(1,"div",22),l.Pb(2,"div",23),l.Pb(3,"span"),l.rc(4),l.Ob(),l.Kb(5,"img",24),l.Ob(),l.Pb(6,"div",25),l.Pb(7,"div"),l.Pb(8,"h4",26),l.rc(9),l.Ob(),l.Pb(10,"h5",26),l.rc(11),l.Ob(),l.Ob(),l.Pb(12,"div",27),l.Pb(13,"div",28),l.Pb(14,"span",29),l.rc(15,"more_vert"),l.Ob(),l.pc(16,K,7,1,"ul",30),l.Ob(),l.Ob(),l.Ob(),l.Ob(),l.Ob()),2&t){const t=e.$implicit;l.xb(4),l.sc(null==t.categoria?null:t.categoria.nome),l.xb(5),l.sc(t.nome),l.xb(2),l.tc("R$ ",t.valor.toString().replace(".",","),"")}}function $(t,e){1&t&&(l.Pb(0,"div",1),l.Pb(1,"div",35),l.Pb(2,"div",36),l.rc(3," Nenhuma informa\xe7\xe3o encontrada. "),l.Ob(),l.Ob(),l.Ob())}function B(t,e){if(1&t){const t=l.Qb();l.Pb(0,"div",1),l.Pb(1,"div",37),l.Pb(2,"pagination",38),l.Wb("pageChanged",(function(e){return l.jc(t),l.Yb().obterPaginaProduto(e.page)}))("ngModelChange",(function(e){return l.jc(t),l.Yb().pagina=e})),l.Ob(),l.Ob(),l.Ob()}if(2&t){const t=l.Yb();l.xb(2),l.bc("totalItems",t.totalItems)("itemsPerPage",t.tamanho)("ngModel",t.pagina)}}function H(t,e){if(1&t){const t=l.Qb();l.Pb(0,"app-produto-form",39),l.Wb("eventFechar",(function(){return l.jc(t),l.Yb().fecharModal()}))("eventReload",(function(){l.jc(t);const e=l.Yb();return e.obterPaginaProduto(e.pagina)})),l.Ob()}if(2&t){const t=l.Yb();l.bc("produto",t.produto)("categorias",t.categorias)}}const W=function(){return{prefix:"R$ ",thousands:".",decimal:",",align:"left"}},L=[{path:"",component:(()=>{class t{constructor(t,e,i,r,o){this._produtoService=t,this._categoriaService=e,this._toastrService=i,this._modalService=r,this._formBuilder=o,this.pagina=1,this.tamanho=12,this.totalItems=0}ngOnInit(){this.criarFiltroForm(),this.obterListaCategoria(),this.obterPaginaProduto(this.pagina)}criarFiltroForm(){this.filtroForm=this._formBuilder.group({nome:[null],valorMin:[null],valorMax:[null],categoria:[null]})}filtrar(){this.pagina=0,this.obterPaginaProduto(this.pagina)}obterPaginaProduto(t){let e=this.filtroForm.value;this._produtoService.obterPaginaProduto(t,this.tamanho,e.nome,e.valorMin,e.valorMax,e.categoria).subscribe(t=>{200==t.status&&(this.produtos=t.body,this.totalItems=Number.parseInt(t.headers.get("X-Total-Count")))},t=>this._toastrService.error("Ocorreu um erro ao carregar os produtos, por favor entre em contato com o suporte."))}exibirProdutoForm(t,e){this.produto=new s,e&&(this.produto=e),this.modalRef=this._modalService.show(t,{ignoreBackdropClick:!0,class:"modal-md"})}excluir(t){this._produtoService.excluir(t).subscribe(e=>{200==e.status&&(this._toastrService.success("Produto excluido com sucesso!"),this.produtos=this.produtos.filter(e=>e.id!=t))},t=>this._toastrService.error("Ocorreu um erro ao tentar excluir, por favor contate o suporte."))}fecharModal(){this.modalRef.hide()}obterListaCategoria(){this._categoriaService.obterListaCategoria().subscribe(t=>{200==t.status&&(this.categorias=t.body)},t=>this._toastrService.error("Ocorreu um erro ao carregar as categorias, por favor contate o surpote."))}limparFiltros(){this.filtroForm.reset(),this.filtroForm.get("categoria").setValue(null),this.pagina=0,this.obterPaginaProduto(this.pagina)}exibirLimparFiltro(){return this.filtroForm.get("nome").value||this.filtroForm.get("valorMin").value||this.filtroForm.get("valorMax").value||this.filtroForm.get("categoria").value}}return t.\u0275fac=function(e){return new(e||t)(l.Jb(d),l.Jb(p.a),l.Jb(b.b),l.Jb(m.a),l.Jb(r.b))},t.\u0275cmp=l.Db({type:t,selectors:[["app-produto"]],decls:27,vars:12,consts:[[1,"container-fluid"],[1,"row"],[1,"col-lg-12","d-flex","justify-content-between","mt-4"],[1,"title","d-flex","align-items-center"],["type","button",1,"btn","btn-outline-primary",3,"click"],[1,"form-inline","mb-4",3,"formGroup","submit"],["formControlName","nome","type","text","placeholder","Nome do produto","id","nome",1,"form-control","mr-2"],["currencyMask","","formControlName","valorMin","placeholder","Valor minimo","type","text","id","valorMin",1,"form-control","mr-2",3,"options"],["currencyMask","","formControlName","valorMax","placeholder","Valor maximo","type","text","id","valorMax",1,"form-control","mr-2",3,"options"],["formControlName","categoria","id","categoria",1,"form-control","mr-2"],["value","null"],[3,"value",4,"ngFor","ngForOf"],["id","filtrar","type","submit",1,"btn","btn-outline-primary","mr-2"],["class","btn btn-outline-primary","id","limpar","type","button",3,"click",4,"ngIf"],["class","col-lg-2",4,"ngFor","ngForOf"],["class","row",4,"ngIf"],["produtoForm",""],["title","Realmente deseja excluir esse produto?","text","Essa a\xe7\xe3o \xe9 irrevers\xedvel","icon","question","cancelButtonText","Cancelar","cancelButtonColor","#2196F3","confirmButtonText","Excluir","confirmButtonColor","#dc3545",3,"showCancelButton","focusCancel"],["deleteSwal",""],[3,"value"],["id","limpar","type","button",1,"btn","btn-outline-primary",3,"click"],[1,"col-lg-2"],[1,"ui-card"],[1,"ui-card-header"],["src","./assets/images/produto.png","alt","produto",1,"img-fluid"],[1,"ui-card-body","d-flex","justify-content-between"],[1,"sub-title"],[1,"pl-1","cursor-pointer"],["dropdown","",1,"btn-group"],["dropdownToggle","",1,"material-icons"],["id","dropdown-animated","class","dropdown-menu","role","menu","aria-labelledby","button-animated",4,"dropdownMenu"],["id","dropdown-animated","role","menu","aria-labelledby","button-animated",1,"dropdown-menu"],["role","menuitem",3,"click"],["href","javascript:void(0)",1,"dropdown-item"],["role","menuitem",3,"swal","confirm"],[1,"col-lg-12"],["role","alert",1,"alert","alert-info"],[1,"col-xs-12","col-12","mt-3"],["nextText","Avan\xe7ar","previousText","Voltar",3,"totalItems","itemsPerPage","ngModel","pageChanged","ngModelChange"],[3,"produto","categorias","eventFechar","eventReload"]],template:function(t,e){if(1&t){const t=l.Qb();l.Pb(0,"div",0),l.Pb(1,"div",1),l.Pb(2,"div",2),l.Pb(3,"h3",3),l.rc(4,"Produtos"),l.Ob(),l.Pb(5,"button",4),l.Wb("click",(function(){l.jc(t);const i=l.hc(24);return e.exibirProdutoForm(i)})),l.rc(6,"+ Novo Produto"),l.Ob(),l.Ob(),l.Ob(),l.Kb(7,"hr"),l.Pb(8,"form",5),l.Wb("submit",(function(){return e.filtrar()})),l.Kb(9,"input",6),l.Kb(10,"input",7),l.Kb(11,"input",8),l.Pb(12,"select",9),l.Pb(13,"option",10),l.rc(14,"Selecione uma categoria"),l.Ob(),l.pc(15,T,2,2,"option",11),l.Ob(),l.Pb(16,"button",12),l.rc(17,"Filtrar"),l.Ob(),l.pc(18,A,2,0,"button",13),l.Ob(),l.Pb(19,"div",1),l.pc(20,j,17,3,"div",14),l.Ob(),l.pc(21,$,4,0,"div",15),l.pc(22,B,3,3,"div",15),l.Ob(),l.pc(23,H,1,2,"ng-template",null,16,l.qc),l.Kb(25,"swal",17,18)}2&t&&(l.xb(8),l.bc("formGroup",e.filtroForm),l.xb(2),l.bc("options",l.cc(10,W)),l.xb(1),l.bc("options",l.cc(11,W)),l.xb(4),l.bc("ngForOf",e.categorias),l.xb(3),l.bc("ngIf",e.exibirLimparFiltro()),l.xb(2),l.bc("ngForOf",e.produtos),l.xb(1),l.bc("ngIf",!(null!=e.produtos&&e.produtos.length)),l.xb(1),l.bc("ngIf",e.totalItems>e.tamanho),l.xb(3),l.bc("showCancelButton",!0)("focusCancel",!0))},directives:[r.p,r.i,r.d,r.a,r.h,r.c,x,r.m,r.k,r.o,n.i,n.j,C.a,y.a,y.d,y.b,C.b,V.a,r.j,N],styles:[""]}),t})()}];let J=(()=>{class t{}return t.\u0275mod=l.Hb({type:t}),t.\u0275inj=l.Gb({factory:function(e){return new(e||t)},imports:[[a.c.forChild(L)],a.c]}),t})(),Y=(()=>{class t{}return t.\u0275mod=l.Hb({type:t}),t.\u0275inj=l.Gb({factory:function(e){return new(e||t)},imports:[[n.b,J,r.l,r.e,o.a,O]]}),t})()}}]);